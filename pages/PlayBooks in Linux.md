## üßØ Playbook: —Å–µ—Ä–≤–∏—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç / 502 / ‚Äú–Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç‚Äù
	- **–¶–µ–ª—å:** –ø–æ–Ω—è—Ç—å, –∂–∏–≤ –ª–∏ —Å–µ—Ä–≤–∏—Å, –ø–æ—á–µ–º—É —É–ø–∞–ª, —Å–ª—É—à–∞–µ—Ç –ª–∏ –ø–æ—Ä—Ç
	- **–®–∞–≥–∏**
		- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —é–Ω–∏—Ç–∞
			- ```
			  systemctl status <service> --no-pager
			  ```
		- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ (—Å —Ç–µ–∫—É—â–µ–π –∑–∞–≥—Ä—É–∑–∫–∏)
			- ```
			  journalctl -u <service> -b --no-pager | tail -n 200
			  ```
		- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ —Å–Ω–æ–≤–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
			- ```
			  sudo systemctl restart <service>
			  systemctl status <service> --no-pager
			  ```
		- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–ª—É—à–∞–µ—Ç –ª–∏ –ø–æ—Ä—Ç
			- ```
			  ss -tulpen | grep -E ':(80|443|<–ø–æ—Ä—Ç>)\b'
			  ```
		- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
			- nginx:
				- ```
				  sudo nginx -t
				  ```
			- apache:
				- ```
				  sudo apachectl configtest
				  ```
	- **–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**
		- –Ω–µ–≤–µ—Ä–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥, –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã, –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç, –∑–∞–∫–æ–Ω—á–∏–ª—Å—è –¥–∏—Å–∫/–ø–∞–º—è—Ç—å, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (DB) –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
		  
		  ---
- ## üíæ Playbook: –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ (No space left on device)
	- **–¶–µ–ª—å:** –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ ‚Äú–∫—Ç–æ —Å—ä–µ–ª‚Äù –∏ –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ
	- **–®–∞–≥–∏**
		- –ì–¥–µ –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å
			- ```
			  df -hT
			  ```
		- –ö—Ç–æ —Å—ä–µ–ª –º–µ—Å—Ç–æ (–ø–æ –≤–µ—Ä—Ö–Ω–∏–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º)
			- ```
			  sudo du -h --max-depth=1 / | sort -h | tail -n 20
			  sudo du -h --max-depth=1 /var | sort -h | tail -n 20
			  ```
		- –ù–∞–π—Ç–∏ –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã
			- ```
			  sudo find /var -type f -size +200M -printf '%p %s\n' 2>/dev/null | sort -n | tail -n 30
			  ```
		- journald: –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ–±—ä—ë–º –∏ –ø–æ–¥—á–∏—Å—Ç–∏—Ç—å (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ)
			- ```
			  journalctl --disk-usage
			  sudo journalctl --vacuum-time=7d
			  ```
		- –ï—Å–ª–∏ Docker (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
			- ```
			  docker system df
			  docker image prune
			  docker container prune
			  docker volume prune
			  ```
	- **–ß–∞—Å—Ç—ã–µ –≤–∏–Ω–æ–≤–Ω–∏–∫–∏**
		- `/var/log`, `/var/lib/docker`, –∫—ç—à–∏ `/var/cache`, –¥–∞–º–ø—ã/–±—ç–∫–∞–ø—ã
		  
		  ---
- ## üî• Playbook: –≤—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ / —Å–µ—Ä–≤–µ—Ä —Ç–æ—Ä–º–æ–∑–∏—Ç
	- **–¶–µ–ª—å:** –ø–æ–Ω—è—Ç—å CPU vs RAM vs Disk I/O
	- **–®–∞–≥–∏**
		- –û–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞
			- ```
			  uptime
			  top
			  ```
		- –ö—Ç–æ –≥—Ä—É–∑–∏—Ç CPU/–ø–∞–º—è—Ç—å
			- ```
			  ps aux --sort=-%cpu | head -n 15
			  ps aux --sort=-%mem | head -n 15
			  ```
		- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–æ PID
			- ```
			  ps -fp <PID>
			  ```
		- –ï—Å–ª–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ –Ω–∞ Disk I/O
			- (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω sysstat)
			- ```
			  iostat -xz 1 5
			  ```
			- –ë—ã—Å—Ç—Ä–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—à–∏–±–∫–∏ –¥–∏—Å–∫–∞/—è–¥—Ä–∞
			- ```
			  dmesg -T | tail -n 100
			  ```
		- –ê–∫–∫—É—Ä–∞—Ç–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
			- ```
			  kill -TERM <PID>
			  sleep 3
			  kill -KILL <PID>   # –∫—Ä–∞–π–Ω–∏–π —Å–ª—É—á–∞–π
			  ```
	- **–ó–∞–º–µ—Ç–∫–∏**
		- –í—ã—Å–æ–∫–∏–π load –ø—Ä–∏ –Ω–∏–∑–∫–æ–º CPU —á–∞—Å—Ç–æ = I/O wait –∏–ª–∏ ‚Äú–∑–æ–º–±–∏‚Äù –Ω–∞ –¥–∏—Å–∫–µ/—Å–µ—Ç–∏
		  
		  ---
- ## üß† Playbook: –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–∞–º—è—Ç–∏ / OOM killer
	- **–¶–µ–ª—å:** –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å OOM –∏ –Ω–∞–π—Ç–∏ –≤–∏–Ω–æ–≤–Ω–∏–∫–∞
	- **–®–∞–≥–∏**
		- –°–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏/—Å–≤–æ–ø–∞
			- ```
			  free -h
			  ```
		- –¢–û–ü –ø–æ –ø–∞–º—è—Ç–∏
			- ```
			  ps aux --sort=-%mem | head -n 20
			  ```
		- –ë—ã–ª –ª–∏ OOM
			- ```
			  dmesg -T | grep -i -E "oom|killed process" | tail -n 50
			  ```
		- –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
			- ```
			  journalctl -u <service> -b --no-pager | tail -n 200
			  ```
	- **–î–∞–ª—å—à–µ –ø–æ —Å–∏—Ç—É–∞—Ü–∏–∏**
		- –ª–∏–º–∏—Ç—ã –ø–∞–º—è—Ç–∏ (systemd/cgroups), –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ RAM/swap (–≤–∑–≤–µ—à–µ–Ω–Ω–æ)
		  
		  ---
- ## üåê Playbook: ‚Äú–Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞‚Äù / —Å–µ—Ç—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
	- **–¶–µ–ª—å:** –æ—Ç–¥–µ–ª–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É IP/–º–∞—Ä—à—Ä—É—Ç–∞/DNS
	- **–®–∞–≥–∏**
		- –ï—Å—Ç—å –ª–∏ IP
			- ```
			  ip a
			  ```
		- –ï—Å—Ç—å –ª–∏ default route
			- ```
			  ip r
			  ```
		- –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ ‚Äú–≥–æ–ª—ã–π IP‚Äù
			- ```
			  ping -c 3 1.1.1.1
			  ```
		- –ï—Å–ª–∏ IP —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –¥–æ–º–µ–Ω—ã –Ω–µ—Ç ‚Äî DNS
			- ```
			  cat /etc/resolv.conf
			  dig google.com +short
			  ```
		- –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTP
			- ```
			  curl -I https://example.com
			  ```
		- –ì–¥–µ –æ—Ç–≤–∞–ª–∏–≤–∞–µ—Ç—Å—è –º–∞—Ä—à—Ä—É—Ç
			- ```
			  traceroute 1.1.1.1
			  ```
	- **–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**
		- –Ω–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∞, —Å–ª–æ–º–∞–Ω DNS, MTU/VPN, firewall, –ø—Ä–æ–±–ª–µ–º—ã —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
		  
		  ---
- ## üö™ Playbook: –ø–æ—Ä—Ç –∑–∞–∫—Ä—ã—Ç / –Ω–µ –º–æ–≥—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è (ssh/http/db)
	- **–¶–µ–ª—å:** –ø–æ–Ω—è—Ç—å ‚Äú–Ω–µ —Å–ª—É—à–∞–µ—Ç‚Äù vs ‚Äú–±–ª–æ–∫–∏—Ä—É–µ—Ç firewall‚Äù vs ‚Äú–Ω–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç—Å—è‚Äù
	- **–®–∞–≥–∏**
		- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: —Å–ª—É—à–∞–µ—Ç –ª–∏ –ø–æ—Ä—Ç
			- ```
			  ss -tulpen | grep -E ':(22|80|443|<–ø–æ—Ä—Ç>)\b'
			  ```
		- –° –∫–ª–∏–µ–Ω—Ç–∞: –ø—Ä–æ–≤–µ—Ä–∫–∞ TCP –∫–æ–Ω–Ω–µ–∫—Ç–∞
			- ```
			  nc -vz <host> <port>
			  ```
		- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å firewall (—á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
			- nftables:
				- ```
				  sudo nft list ruleset | less
				  ```
			- ufw:
				- ```
				  sudo ufw status verbose
				  ```
		- –ï—Å–ª–∏ —ç—Ç–æ SSH: –ª–æ–≥–∏
			- ```
			  sudo journalctl -u ssh -b --no-pager | tail -n 200
			  ```
			  
			  ---
- ## üîí Playbook: Permission denied (–ø—Ä–∞–≤–∞/–≤–ª–∞–¥–µ–ª–µ—Ü/–≥—Ä—É–ø–ø–∞)
	- **–¶–µ–ª—å:** –±—ã—Å—Ç—Ä–æ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —Ç–∞–∫ —Å –ø—Ä–∞–≤–∞–º–∏
	- **–®–∞–≥–∏**
		- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞/–≤–ª–∞–¥–µ–ª—å—Ü–∞
			- ```
			  ls -lah /path/to/file_or_dir
			  ```
		- –ü–æ–¥ –∫–∞–∫–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ—Ä–≤–∏—Å
			- ```
			  ps aux | grep <service>
			  ```
		- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
			- ```
			  sudo chown -R user:group /path/to/dir
			  ```
		- –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∞ (—Ç–∏–ø–æ–≤–æ–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–∏–Ω–∏–º—É–º)
			- –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:
				- ```
				  sudo chmod 755 /path/to/dir
				  ```
			- —Ñ–∞–π–ª:
				- ```
				  sudo chmod 644 /path/to/file
				  ```
		- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥—Ä—É–ø–ø—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
			- ```
			  id <user>
			  ```
	- **–ê–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω—ã**
		- `chmod 777` ‚Äú—á—Ç–æ–±—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ‚Äù ‚Äî –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –ø–ª–æ—Ö–∞—è –∏–¥–µ—è
		  
		  ---
- ## üì¶ Playbook: apt —Å–ª–æ–º–∞–Ω / –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ / dpkg –ø—Ä–µ—Ä–≤–∞–Ω
	- **–¶–µ–ª—å:** –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
	- **–®–∞–≥–∏**
		- –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã
			- ```
			  sudo apt update
			  ```
		- –ü–æ—á–∏–Ω–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
			- ```
			  sudo apt -f install
			  ```
		- –î–æ–¥–µ–ª–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–∞–∫–µ—Ç–æ–≤
			- ```
			  sudo dpkg --configure -a
			  ```
		- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–µ—Ä—Å–∏–∏/—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
			- ```
			  apt-cache policy <pkg>
			  ```
		- –õ–æ–≥–∏ apt
			- ```
			  tail -n 200 /var/log/apt/term.log
			  ```
			  
			  ---
- ## üßæ Playbook: –±—ã—Å—Ç—Ä–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ ‚Äú–ø—Ä—è–º–æ —Å–µ–π—á–∞—Å‚Äù
	- **–¶–µ–ª—å:** –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ —É–≤–∏–¥–µ—Ç—å –ø—Ä–∏—á–∏–Ω—É
	- **–®–∞–≥–∏**
		- –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ —Å ‚Äúfollow‚Äù
			- ```
			  journalctl -u <service> -f
			  ```
		- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–∏—Å—Ç–µ–º—ã
			- ```
			  journalctl -p err -b --no-pager | tail -n 200
			  ```
		- –ï—Å–ª–∏ –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª–µ
			- ```
			  tail -n 200 /var/log/<file>.log
			  tail -f /var/log/<file>.log
			  ```
			  
			  ---
			  
			  –ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî —è —Å–¥–µ–ª–∞—é –µ—â—ë **–ø–ª–µ–π–±—É–∫–∏ –ø–æ–¥ —Ç–≤–æ–π —Å—Ç–µ–∫** (Proxmox / Docker Compose / WireGuard / Prometheus+Grafana+Loki), —Ç–æ–∂–µ –≤ Logseq-—Ñ–æ—Ä–º–∞—Ç–µ.